{
  "variables": {
    "ccscanner_name": "ccscanner-template-{{ timestamp }}",
    "ssh_private_key_file": "/Users/arozar/.ssh/id_rsa_packer"
  },
  "builders": [
    {
      "type": "vmware-iso",
      "guest_os_type": "ubuntu-64",
      "vm_name": "{{user `ccscanner_name`}}",

      "iso_url": "https://releases.ubuntu.com/20.04/ubuntu-20.04.1-live-server-amd64.iso",
      "iso_checksum": "sha256:443511f6bf12402c12503733059269a2e10dec602916c0a75263e5d990f6bb93",

      "http_directory": "http",
      "output_directory": "output/fusion",

      "boot_wait": "5s",
      "boot_command": [
        "<enter><enter><f6><esc><wait> ",
        "autoinstall ds=nocloud-net;seedfrom=http://{{ .HTTPIP }}:{{ .HTTPPort }}/",
        "<enter><wait>"
      ],

      "shutdown_command": "sudo poweroff",

      "ssh_username": "ubuntu",
      "ssh_password": "Youshou1dch@ng3measap",
      "ssh_pty": true,
      "ssh_timeout": "30m",
      "ssh_handshake_attempts": "50",

      "vmdk_name": "ccscanner-disk",
      "disk_size": 61440,
      "disk_type_id": 1,
      "cpus": 2,
      "cores": 2,
      "memory": 8192
    }
  ],
  "provisioners": [
    {
      "type": "file",
      "source": "configs/fury.list",
      "destination": "/tmp/"
    },
     {
      "type": "file",
      "source": "configs/sudoers",
      "destination": "/tmp/"
    },
    {
      "type": "shell",
      "script": "scripts/provision-vmware.sh"
    }
  ]
}